#!/usr/bin/env bash
# fo [FUZZY PATTERN] - Open the selected file with the default editor
#   - Bypass fuzzy finder if there's only one match (--select-1)
#   - Exit if there's no match (--exit-0)
#   - CTRL-O to open with `open` command,
#   - CTRL-E or Enter key to open with the $EDITOR
# source (https://github.com/junegunn/fzf/wiki/examples)

IFS=$'\n' out=($(fzf-tmux --query="$*" --exit-0 --expect=ctrl-o,ctrl-e))
if [ ${out[1]} ]; then
  key=${out[0]}
  file=${out[1]}
else
  file=${out[0]}
fi
if [ -n "$file" ]; then
  [ "$key" = ctrl-o ] && open "$file" || ${EDITOR:-vim} "$file"
fi
