#!/bin/bash
# Update Atom Editor

restore_loc="$HOME/.atom/packages.txt"

if installed apm; then
  echo "Updating Atom"

  # apm does weird things if we happen to be in an npm project directory
  pushd /tmp >/dev/null

  apm upgrade --no-confirm
  apm clean

  if [[ "$*" == *--save* ]]; then
    echo "Saving packages list to $restore_loc"
    apm list --bare --installed --dev false > "$restore_loc"
  fi

  popd
else
  echo "Atom not found, skipping"
fi
