#!/bin/bash
# Update dotfiles

echo "Checking for updates to dotfiles..."
dotfiles=${1:-$DOTFILES}
if [ -n "$dotfiles" ]; then
  echo "Checking for git updates at dotfiles location: $dotfiles"
  if [ -z "$(git -C "$dotfiles" ls-files --exclude-standard --others)" ]; then
    git -C "$dotfiles" pull
  else
    echo "Not updating dotfiles because the repo is dirty"
  fi
  "$dotfiles/install" "$dotfiles"
else
  echo "No dotfiles location found. Try setting the $DOTFILES environment variable."
fi
