#!/bin/bash
# Update ruby gems

restore_loc="$(find-dotfiles)/scripts/gem_packages"

if installed gem; then
  echo "Updating ruby gems..."
  installed update_rubygems || sudo gem install rubygems-update
  update_rubygems
  gem update $(gem outdated | awk '{print $1}')
  sudo gem update --system
  gem clean

  if [[ "$@" == "--save" ]]; then
    echo "Saving packages list to: $restore_loc"
    gem list > "$restore_loc"
  fi
else
  echo "gem not installed, skipping"
fi
